# Production Environment Configuration for Enhanced Document Intelligence API
# Copy this to .env and fill in your actual values

# ============================================================================
# AZURE OPENAI CONFIGURATION (Required)
# ============================================================================
AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
AZURE_OPENAI_ENDPOINT=https://your-resource-name.cognitiveservices.azure.com/

# API Versions for different models (separate as requested)
AZURE_OPENAI_O3_API_VERSION=2024-12-01-preview    # For o3-mini reasoning model
AZURE_OPENAI_EMBED_API_VERSION=2024-02-01         # For text-embedding-ada-002

# Model Deployments
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002
AZURE_OPENAI_CHAT_DEPLOYMENT=o3-mini

# ============================================================================
# PINECONE CONFIGURATION (Required)
# ============================================================================
PINECONE_API_KEY=your_pinecone_api_key_here
PINECONE_INDEX_NAME=document-intelligence

# ============================================================================
# POSTGRESQL DATABASE CONFIGURATION (Required for Production)
# ============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=document_intelligence

# Connection Pool Configuration
POSTGRES_MIN_POOL_SIZE=5
POSTGRES_MAX_POOL_SIZE=20
POSTGRES_COMMAND_TIMEOUT=30

# ============================================================================
# API SECURITY AND AUTHENTICATION
# ============================================================================
API_BEARER_TOKEN=hackrx2024_your_secure_token_here

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
PORT=8000
HOST=0.0.0.0
LOG_LEVEL=info

# ============================================================================
# PRODUCTION OPTIMIZATION SETTINGS
# ============================================================================

# Rate Limiting
MAX_QUESTIONS_PER_REQUEST=20
MAX_CONCURRENT_REQUESTS=50

# Cache Configuration
CACHE_EXPIRY_DAYS=7
CLEANUP_EXPIRED_CACHE_ON_STARTUP=true

# Processing Configuration
MAX_DOCUMENT_SIZE_MB=50
PROCESSING_TIMEOUT_SECONDS=300
CONFLICT_ANALYSIS_TIMEOUT_SECONDS=120

# Performance Monitoring
ENABLE_ANALYTICS=true
ENABLE_REQUEST_LOGGING=true

# ============================================================================
# DEVELOPMENT SETTINGS (Set to false for production)
# ============================================================================
DEBUG_MODE=false
RELOAD_ON_CHANGE=false
ENABLE_CORS=true

# ============================================================================
# OPTIONAL ADVANCED FEATURES
# ============================================================================

# Advanced Conflict Detection Settings
MAX_CLAUSES_FOR_ANALYSIS=25
SIMILARITY_THRESHOLD_FOR_CONFLICT_ANALYSIS=0.75
ENABLE_BACKGROUND_DOCUMENT_HEALTH_SCORING=true

# Fallback Configuration
ENABLE_GRACEFUL_DEGRADATION=true
FALLBACK_TO_STANDARD_RAG_ON_O3_FAILURE=true

# Memory Management
MAX_MEMORY_USAGE_MB=8192
ENABLE_GARBAGE_COLLECTION_OPTIMIZATION=true

# External Service Timeouts
AZURE_OPENAI_TIMEOUT_SECONDS=120
PINECONE_TIMEOUT_SECONDS=30
PDF_DOWNLOAD_TIMEOUT_SECONDS=60

# ============================================================================
# MONITORING AND ALERTING (Optional)
# ============================================================================

# Health Check Configuration
HEALTH_CHECK_INTERVAL_SECONDS=60
DB_HEALTH_CHECK_TIMEOUT_SECONDS=5

# Performance Thresholds for Alerting
RESPONSE_TIME_ALERT_THRESHOLD_MS=10000
ERROR_RATE_ALERT_THRESHOLD_PERCENT=5
CACHE_HIT_RATE_WARNING_THRESHOLD_PERCENT=50

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Application Metadata
API_VERSION=1.0.0
DEPLOYMENT_ENVIRONMENT=production
SERVICE_NAME=enhanced-document-intelligence

# Container/Server Configuration (if using Docker)
WORKERS=4
MAX_WORKERS=8
WORKER_CLASS=uvicorn.workers.UvicornWorker
